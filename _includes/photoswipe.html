{% assign width = include.width | default: include.images.size %}
{% assign flex = 100 | divided_by: width  | minus: 1 %}
{% if include.width == 1 %}
    {% assign flex = 100 %}
{% endif %}

<div class="image-gallery {{ include.class }}" style="{{ include.style }}" itemscope itemtype="http://schema.org/ImageGallery">
    
    {% for image in include.images %}
    <figure itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
        
        {% if page.layout == 'post' %}
        <a href="{{ site.baseurl }}/assets/img/blog/{{ page.date | date: '%Y-%m-%d' }}-{{ page.post-id }}/{{ image.src }}" itemprop="contentUrl" data-size="{{ image.maxres }}">
            <img src="{{ site.baseurl }}/assets/img/blog/{{ page.date | date: '%Y-%m-%d' }}-{{ page.post-id }}/{{ image.src }}" itemprop="thumbnail" alt="Image description" />
        </a>
        {% else %}
        <a href="{{ image.src }}" itemprop="contentUrl" data-size="{{ image.maxres }}">
            <img src="{{ image.src }}" itemprop="thumbnail" alt="Image description" />
        </a>
        {% endif %}
        
        <figcaption itemprop="caption description" style="display: none;">{{ image.caption }}</figcaption>
    </figure>
    
    {% if image != include.images.last %}
    <div class="padding">&nbsp;</div>
    {% endif %}
    
    {% endfor %}
    
</div>
